<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setting up a new modular robot core &mdash; Revolve2 1.0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=292eb321"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing guide" href="../contributing_guide/index.html" />
    <link rel="prev" title="Creating a physical robot" href="../creating_a_physical_robot/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Revolve2
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html#step-1-installation">Step 1: Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/index.html#step-2-play-with-the-examples">Step 2: Play with the examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#create-a-virtual-environment">Create a virtual environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#download-the-source">Download the source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#common-issues">Common issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#install-packages">Install packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#editable-mode">Editable Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../introduction_to_modular_robots/index.html">Introduction to modular robots</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction_to_modular_robots/index.html#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction_to_modular_robots/index.html#sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../creating_a_physical_robot/index.html">Creating a physical robot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../creating_a_physical_robot/index.html#required-parts">Required parts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../creating_a_physical_robot/index.html#the-core-module">The core module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating_a_physical_robot/index.html#brick-and-active-hinge-modules">Brick and active hinge modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../creating_a_physical_robot/index.html#bolts-for-attaching-modules">Bolts for attaching modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../creating_a_physical_robot/index.html#assembling-a-modular-robot">Assembling a modular robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_a_physical_robot/index.html#d-printing-and-assembling-modules">3D printing and assembling modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_a_physical_robot/index.html#using-your-physical-robot">Using your physical robot</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Physical Robot Core Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparing-the-hardware">Preparing the hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardware-setup-for-a-v1-robot">Hardware setup for a V1 Robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hardware-setup-for-a-v2-robot">Hardware setup for a V2 Robot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-the-rpi">Setting up the RPi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-revolve2-on-the-rpi">Install Revolve2 on the RPi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v1-additional-steps">V1 Additional Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing_guide/index.html">Contributing guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing_guide/index.html#publishing-your-contribution">Publishing your contribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing_guide/index.html#developer-installation">Developer installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing_guide/index.html#continuous-integration">Continuous integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing_guide/index.html#code-tools">Code tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing_guide/index.html#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing_guide/index.html#version-control">Version control</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/standards/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">standards</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/standards/index.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/ci_lab_utilities/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ci_lab_utilities</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/genotypes/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">genotypes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/interactive_objects/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">interactive_objects</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/morphological_novelty_metric/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">morphological_novelty_metric</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/standards/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/fitness_functions/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fitness_functions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/modular_robots_v1/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">modular_robots_v1</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/modular_robots_v2/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">modular_robots_v2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/morphological_measures/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">morphological_measures</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/planar_robot_representation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planar_robot_representation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/simulation_parameters/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">simulation_parameters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/standards/terrains/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">terrains</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/experimentation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">experimentation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/experimentation/index.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/experimentation/database/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">database</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/experimentation/evolution/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">evolution</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/experimentation/optimization/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optimization</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/experimentation/index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/experimentation/logging/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/experimentation/rng/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rng</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/modular_robot/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">modular_robot</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/modular_robot/index.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot/body/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">body</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot/brain/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">brain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot/sensor_state/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sensor_state</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/modular_robot/index.html#package-contents">Package Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot/index.html#classes">Classes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/modular_robot_physical/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">modular_robot_physical</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/modular_robot_physical/index.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_physical/physical_interfaces/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">physical_interfaces</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_physical/remote/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">remote</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_physical/robot_daemon/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_daemon</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_physical/robot_daemon_api/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">robot_daemon_api</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/modular_robot_physical/index.html#package-contents">Package Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_physical/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_physical/index.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/modular_robot_simulation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">modular_robot_simulation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/modular_robot_simulation/index.html#package-contents">Package Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_simulation/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/modular_robot_simulation/index.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/simulation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">simulation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/simulation/index.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/simulation/scene/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">scene</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/simulation/simulator/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">simulator</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autoapi/mujoco_simulator/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mujoco_simulator</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/mujoco_simulator/index.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/mujoco_simulator/textures/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">textures</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/mujoco_simulator/viewers/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">viewers</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../autoapi/mujoco_simulator/index.html#package-contents">Package Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../autoapi/mujoco_simulator/index.html#classes">Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Revolve2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Setting up a new modular robot core</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="setting-up-a-new-modular-robot-core">
<h1>Setting up a new modular robot core<a class="headerlink" href="#setting-up-a-new-modular-robot-core" title="Link to this heading"></a></h1>
<p>This tutorial is for researchers who want to set up a new modular robot core.
First check if someone else has already arranged this for you, for example a research lab manager. If so, you should probably look at <a class="reference internal" href="../creating_a_physical_robot/index.html#creating-a-physical-robot"><span class="std std-ref">how to create a physical modular robot</span></a>.
Also, if you simply want to know how to use a pre-installed physical robot, check the example <a class="reference internal" href="../getting_started/index.html#step-2-play-with-the-examples"><span class="std std-ref">physical_robot_remote</span></a>.</p>
<p>Version 1 (V1) and version 2 (V2) of the hardware exists. For anyone outside of the CI Group, V1 is not available; please look at the V2 modular robot.</p>
<section id="preparing-the-hardware">
<h2>Preparing the hardware<a class="headerlink" href="#preparing-the-hardware" title="Link to this heading"></a></h2>
<p>For both V1 and V2 the following items are required:</p>
<ul class="simple">
<li><p>A housing that will contain the rest of the core hardware. Models to print the core housing can be found on the following git repo: <a class="reference external" href="https://github.com/ci-group/revolve-models">https://github.com/ci-group/revolve-models</a>.</p></li>
<li><p>A Raspberry Pi (RPi). For V2, this must be a RPi 4 (or newer, but check for compatibility).</p></li>
<li><p>A HAT (hardware attached on top), as described in the following hardware specific sections.</p></li>
</ul>
<section id="hardware-setup-for-a-v1-robot">
<h3>Hardware setup for a V1 Robot<a class="headerlink" href="#hardware-setup-for-a-v1-robot" title="Link to this heading"></a></h3>
<p><strong>V1 is only available to CI Group.</strong></p>
<ul class="simple">
<li><p>Obtain and attach a V1 HAT, available in the CI Group lab.</p></li>
<li><p>Obtain a V1 specific battery, available in the CI Group lab.</p></li>
</ul>
</section>
<section id="hardware-setup-for-a-v2-robot">
<h3>Hardware setup for a V2 Robot<a class="headerlink" href="#hardware-setup-for-a-v2-robot" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>To power on the device</strong>, the user must press the power-on switch. When the switch is pressed, the LED will blink three times. After the blinking period, the LED will flash multiple times. The user should release the power switch before the flashing stops. If the button is released after the flashing has finished, nothing will happen. Note: The device can only be turned on if the battery has sufficient capacity.</p></li>
<li><p><strong>To turn off the device</strong>, follow the same procedure: press and hold the button while the LED blinks, and release it while the LED is flashing.</p></li>
</ul>
<p>For more instructions on  how to set up the hardware of a V2 core, refer to <a class="reference external" href="https://github.com/ci-group/robohat">https://github.com/ci-group/robohat</a>.</p>
<p><strong>Important:</strong> For the V2 to work properly the <cite>config.txt</cite> on the RPi has to be changed.
The following file contains the correct config content: <a class="reference external" href="https://github.com/ci-group/robohat/blob/main/config.txt">https://github.com/ci-group/robohat/blob/main/config.txt</a>.
On the RPi adjust the config in <cite>/boot/config.txt</cite> or on newer systems <cite>/boot/firmware/config.txt</cite>.</p>
</section>
</section>
<section id="setting-up-the-rpi">
<h2>Setting up the RPi<a class="headerlink" href="#setting-up-the-rpi" title="Link to this heading"></a></h2>
<p>This step is the same for all types of hardware.</p>
<ol class="arabic">
<li><p>Flash the SD card with Raspberry Pi OS (previously Raspbian). Some Important notes:</p>
<blockquote>
<div><ul class="simple">
<li><p>If you are required to pick a username and password, it is recommended to pick <code class="code docutils literal notranslate"><span class="pre">pi</span></code> and <code class="code docutils literal notranslate"><span class="pre">raspberry</span></code>. For now, all the heads are set by default with <code class="code docutils literal notranslate"><span class="pre">robo`</span></code> as the username and <code class="code docutils literal notranslate"><span class="pre">test</span></code> as the password.</p></li>
<li><p>Reminder for CI Group people: if you select a keyboard layout, pick <cite>English(US)</cite>. It can always be changed using the <cite>raspi-config</cite> tool on the RPi.</p></li>
<li><p>When setting up the Wi-Fi connection, select your Country. (CI-Group Wi-Fi: <em>ThymioNet</em>)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Boot the RPi and get command line access. Here are some general Tips:</p>
<blockquote>
<div><ul>
<li><p>You can connect a keyboard and screen.</p></li>
<li><p>Better is to SSH. This works only if you and the RPi are on the same network. For CI Group, connect it to <em>ThymioNet</em> Wi-Fi.</p>
<blockquote>
<div><ul class="simple">
<li><p>Hint: SSH is not enabled by default. The simplest way to enable it is using the <code class="code docutils literal notranslate"><span class="pre">raspi-config</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>If you want to SSH and don’t know the IP of the RPi, you can use <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nmap</span> <span class="pre">-sn</span> <span class="pre">&lt;your</span> <span class="pre">ip&gt;</span></code> on your machine to find all clients on your network.</p></li>
<li><p><strong>For V2 robots:</strong> You can establish a serial connection using the AUX input on the hat. To do so, first connect the RoboHat to your device using a cable. Then, before powering on the device, use the following command to access the RoboHat: <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">screen</span> <span class="pre">&lt;port</span> <span class="pre">to</span> <span class="pre">connect&gt;</span> <span class="pre">115200</span></code>. If you first power on and then run the command, the terminal might show nothing because there is no data written to the serial port.</p>
<blockquote>
<div><ul class="simple">
<li><p>For linux users, the port is usually: <code class="code docutils literal notranslate"><span class="pre">/dev/ttyUSB0</span></code>.</p></li>
<li><p>For mac users the port is usually: <code class="code docutils literal notranslate"><span class="pre">/dev/cu.usbserial</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><dl class="simple">
<dt>If <cite>screen</cite> is not very smooth somehow, you can use PuTTY instead.</dt><dd><ul class="simple">
<li><p>To install it on Linux <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">putty</span></code></p></li>
<li><p>To connect to the serial port <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">putty</span> <span class="pre">/dev/ttyUSB0</span> <span class="pre">-serial</span> <span class="pre">-sercfg</span> <span class="pre">115200,8,n,1,N</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ol>
<a class="reference internal image-reference" href="../_images/core_serial_port.png"><img alt="../_images/core_serial_port.png" class="align-center" src="../_images/core_serial_port.png" style="width: 45%;" /></a>
</section>
<section id="install-revolve2-on-the-rpi">
<h2>Install Revolve2 on the RPi<a class="headerlink" href="#install-revolve2-on-the-rpi" title="Link to this heading"></a></h2>
<p>Setting up Revolve2 on the robot requires different steps, depending on the hardware version. Some general steps for all versions:</p>
<ol class="arabic">
<li><p>Set up a global pyenv. This is to prevent changes to the system’s Python installation.:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Install required packages using:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>git<span class="w"> </span>libssl-dev<span class="w"> </span>libbz2-dev<span class="w"> </span>libncurses5-dev<span class="w"> </span>libncursesw5-dev<span class="w"> </span>libreadline-dev<span class="w"> </span>libsqlite3-dev<span class="w"> </span>libffi-dev<span class="w"> </span>liblzma-dev
</pre></div>
</div>
<p>If an <cite>404 error</cite> appears in this step, you most likely are on an old RPi OS.
To check your os version you can run <code class="code docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/etc/os-release</span></code>. It should be version <code class="code docutils literal notranslate"><span class="pre">12</span> <span class="pre">Bookworm</span></code> or newer.</p>
</div></blockquote>
</li>
<li><p>Install pyenv: <code class="code docutils literal notranslate"><span class="pre">curl</span> <span class="pre">https://pyenv.run</span> <span class="pre">|</span> <span class="pre">bash</span></code></p></li>
<li><p>Add <code class="code docutils literal notranslate"><span class="pre">pyenv</span></code> to bash:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;# Enable pyenv</span>
<span class="s1">export PYENV_ROOT=&quot;$HOME/.pyenv&quot;</span>
<span class="s1">command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;</span>
<span class="s1">eval &quot;$(pyenv init -)&quot;</span>
<span class="s1">eval &quot;$(pyenv virtualenv-init -)&quot;</span>
<span class="s1">&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Log in and out of the RPi.</p></li>
<li><p>Get the right Python version (this takes a long time): <code class="code docutils literal notranslate"><span class="pre">pyenv</span> <span class="pre">install</span> <span class="pre">3.11</span></code></p></li>
<li><p>Create a global virtualenv: <code class="code docutils literal notranslate"><span class="pre">pyenv</span> <span class="pre">virtualenv</span> <span class="pre">3.11</span> <span class="pre">global_env</span></code> &amp; <code class="code docutils literal notranslate"><span class="pre">pyenv</span> <span class="pre">global</span> <span class="pre">global_env</span></code></p></li>
</ol>
</div></blockquote>
</li>
<li><p>Then install Revolve2 using:</p>
<blockquote>
<div><ul class="simple">
<li><p>V1: <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;revolve2-modular_robot_physical[botv1]</span> <span class="pre">&#64;</span> <span class="pre">git+https://github.com/ci-group/revolve2.git&#64;&lt;revolve_version&gt;#subdirectory=modular_robot_physical&quot;</span></code>.</p></li>
<li><p>V2: <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;revolve2-modular_robot_physical[botv2]</span> <span class="pre">&#64;</span> <span class="pre">git+https://github.com/ci-group/revolve2.git&#64;&lt;revolve_version&gt;#subdirectory=modular_robot_physical&quot;</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><dl>
<dt>Set up the Revolve2 physical robot daemon:</dt><dd><ol class="arabic">
<li><p>Create a systemd service file: <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/systemd/system/robot-daemon.service</span></code></p></li>
<li><p>Add the following content to the file (note: fill in the missing information):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ini
<span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Revolve2<span class="w"> </span>physical<span class="w"> </span>robot<span class="w"> </span>daemon
<span class="nv">After</span><span class="o">=</span>network-online.target<span class="w"> </span>&lt;add<span class="w"> </span>this<span class="w"> </span><span class="k">for</span><span class="w"> </span>v1<span class="w"> </span>robots<span class="w"> </span>as<span class="w"> </span>well:<span class="w"> </span><span class="s1">&#39;pigpiod.service&#39;</span>&gt;

<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">ExecStart</span><span class="o">=</span>/home/&lt;your<span class="w"> </span>username&gt;/.pyenv/versions/global_env/bin/python<span class="w"> </span>/home/&lt;your<span class="w"> </span>username&gt;/.pyenv/versions/global_env/bin/robot-daemon<span class="w"> </span>--hardware<span class="w"> </span>&lt;here<span class="w"> </span>you<span class="w"> </span><span class="nb">type</span><span class="w"> </span>either<span class="w"> </span><span class="s1">&#39;v1&#39;</span><span class="w"> </span>or<span class="w"> </span><span class="s1">&#39;v2&#39;</span>&gt;
<span class="nv">ExecStop</span><span class="o">=</span>/bin/kill<span class="w"> </span>-15<span class="w"> </span><span class="nv">$MAINPID</span>
<span class="nv">Nice</span><span class="o">=</span>-10
<span class="nv">Restart</span><span class="o">=</span>on-failure
<span class="nv">RestartSec</span><span class="o">=</span><span class="m">10</span>

<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Here, the <code class="code docutils literal notranslate"><span class="pre">Nice=-10</span></code> line sets a high priority for the daemon (lower values are higher priority, with -20 being the highest priority). The <code class="code docutils literal notranslate"><span class="pre">-l</span></code> option in the <code class="code docutils literal notranslate"><span class="pre">ExecStart</span></code> line tells <code class="code docutils literal notranslate"><span class="pre">robot-daemon</span></code> to only listen on the localhost interface. The <code class="code docutils literal notranslate"><span class="pre">-n</span> <span class="pre">localhost</span></code> option ensures that robot-daemon only runs if it can connect to localhost (preventing certain failure cases).</p></li>
<li><p>Enable and start the service: <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span></code> &amp; <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">robot-daemon</span></code> &amp; <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">robot-daemon</span></code>.</p></li>
<li><p>Check if it is running properly using: <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">status</span> <span class="pre">robot-daemon</span></code></p></li>
</ol>
</dd>
</dl>
</li>
</ol>
<section id="v1-additional-steps">
<h3>V1 Additional Steps<a class="headerlink" href="#v1-additional-steps" title="Link to this heading"></a></h3>
<p>If you use V1 hardware setup requires additional steps:</p>
<ul>
<li><p>V1 used <code class="code docutils literal notranslate"><span class="pre">pigpiod</span></code>, which is installed automatically with the <code class="code docutils literal notranslate"><span class="pre">modular_robot_physical[botv1]</span></code> package. This library allows the control of the servos attached to the RPi’s HAT.</p></li>
<li><p>Enabling <code class="code docutils literal notranslate"><span class="pre">pigpiod</span></code> daemon so it enables at startup (used for the servos).</p>
<blockquote>
<div><ol class="arabic">
<li><p>Setting up a <code class="code docutils literal notranslate"><span class="pre">systemd</span></code> service: The modern way to manage startup services on many Linux distributions is via <code class="code docutils literal notranslate"><span class="pre">systemd</span></code>. You can set up a service for <code class="code docutils literal notranslate"><span class="pre">pigpiod</span></code>.</p></li>
<li><p>Create a systemd service file: <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">/etc/systemd/system/pigpiod.service</span></code></p></li>
<li><p>Add the following content to the file:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ini
<span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Pigpio<span class="w"> </span>Daemon
<span class="nv">After</span><span class="o">=</span>network-online.target

<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>forking
<span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/pigpiod<span class="w"> </span>-l<span class="w"> </span>-n<span class="w"> </span>localhost
<span class="nv">ExecStop</span><span class="o">=</span>/bin/kill<span class="w"> </span>-15<span class="w"> </span><span class="nv">$MAINPID</span>
<span class="nv">Nice</span><span class="o">=</span>-10
<span class="nv">Restart</span><span class="o">=</span>on-failure
<span class="nv">RestartSec</span><span class="o">=</span><span class="m">10</span>

<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>These settings are identical to the settings for the robot-daemon.</p></li>
<li><p>Enable and start the service: <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">daemon-reload</span></code> &amp; <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">enable</span> <span class="pre">pigpiod</span></code> &amp; <code class="code docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">start</span> <span class="pre">pigpiod</span></code>.</p></li>
</ol>
</div></blockquote>
</li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Computational Intelligence Group, Vrije Universiteit Amsterdam &amp; Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>